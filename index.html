<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" sizes="32x32" href="./img/favicon-32x32.png"> 
    <link rel="stylesheet" href="./css/style.css">
    <title>PORTFOLIO</title>
</head>
<body>
    <div id="loading" class="loading-wrap">
        <div class="loading">
            <svg>
                <circle cx="30" cy="30" r="30"></circle>
            </svg>
            Loding...
        </div>
    </div>
    <header></header>
    <nav id="nav" class="nav">
        <ul>
            <li class="active"><a href="#"><span>WORKS</span></a></li>
            <li><a href="#"><span>DESIGN</span></a></li>
            <li><a href="#"><span>CONTACT</span></a></li>
        </ul>
    </nav>
    <div id="aside" class="aside"> 
        <div id="changeBg" class="black-white">
            <img src="./img/littledeep.webp" alt="">
        </div>
        <div id="top" class="top-btn">
            <span class="left"></span>
            <span class="line"></span>
        </div>
    </div>
    <div id="section" class="section-wrap">
        <!-- works -->
        <section id="black" class="box section01">
            <h1>WORKS</h1>
            <div>
                <ul>
                    <li>
                        <a href="https://mihye0924.github.io/SEOULMILK/seoulmilk" target="_blank">
                            <img id="previewImg" src="./img/works/seoulmilk.png" alt="서울우유">
                            <em>1</em>
                            <span>서울우유</span>
                        </a> 
                        <div class="link-btn">
                            <span id="pcBtn">PC</span>
                            <span id="mobileBtn">MOBILE</span>
                        </div> 
                    </li>
                    <li>
                        <a href="https://mihye0924.github.io/PERIPERA/peripera" target="_blank">
                            <img id="previewImg" src="./img/works/peripera.png" alt="페리페라">
                            <em>2</em>
                            <span>페리페라</span>  
                        </a>  
                        <div class="link-btn">
                            <span id="pcBtn">PC</span>
                            <span id="mobileBtn">MOBILE</span>
                        </div> 
                    </li>
                    <li>
                        <a href="http://momoran.doitmore.kr/" target="_blank">
                            <img id="previewImg" src="./img/works/momoran_main.png" alt="모모란위그">
                            <em>3</em>
                            <span>모모란위그</span>  
                        </a>
                        <div class="link-btn">
                            <span id="pcBtn">PC</span>
                            <span id="mobileBtn">MOBILE</span>
                        </div> 
                    </li> 
                    <li>
                        <a href="#">
                            <!-- <img id="previewImg" src="./img/works/seoulmilk.png" alt="서울우유"> -->
                            <em class="waiting">준비중</em>
                            <!-- <span>서울우유</span> -->
                            <!-- <div class="text-box">
                                <div>
                                    <span id="pcLayout">PC</span>
                                    <span id="mobileLayout">MOBILE</span>
                                </div>
                            </div> -->
                        </a>
                    </li> 
                </ul>
            </div>
        </section>
        <section id="black" class="box section02"></section>
        <section id="black" class="box section03"></section> 
    </div>

    <footer></footer>

    <div id="pcLayout" class="pc-layout-box">
        <div id="pcImg" class="pc-layout"> 
            <img src="./img/works/seoulmilk.png" alt="서울우유">
        </div>
        <div id="pcLayoutTop" class="top-btn">
            <span class="left"></span>
            <span class="line"></span>
        </div>
    </div>
    <div id="mobileLayout" class="mobile-layout-box"> 
        <div class="mobile-layout">   
            <div id="mobileImg" class="mobile-innerbox">
                <img src="./img/works/seoulmilk_mobile.png" alt="서울우유_모바일">
            </div> 
           
            <img src="./img/mobile_phone.png" alt="모바일폰">
        </div>
        <div class="mobile-outerbox">
            <div id="mobileLayoutTop" class="top-btn">
                <span class="left"></span>
                <span class="line"></span>
            </div> 
        </div>
    </div>

    <div id="cursor">
        <div class="circle">
            <div class="circle-inner"></div>
        </div>
        <div class="close">
            <div class="left"></div>
            <div class="right"></div>
        </div>
    </div>

    <script src="./js/script.js"></script>
</body>
</html>

<script>
    
    let cursor = document.querySelector('.circle');
    let closeCursor = document.querySelector('.close');
    let pcLayoutWindow = document.querySelector('#pcLayout .pc-layout'); 
    let pcLayoutTop =  document.querySelector('#pcLayoutTop'); 
    let mobileLayout = document.querySelector('#mobileLayout .mobile-layout'); 
    let mobileLayoutWindow = document.querySelector('#mobileLayout .mobile-innerbox');  
    let mobileLayoutTop =  document.querySelector('#mobileLayoutTop'); 
 
    const init = () => {
        loading();
        navBtn();
        whiteDark();
        scrollTop();
        previewImg();
        pc();
        mobile();
        cursorCustom(); 
    }

    // loading
    const loading = () => {
        window.onload = () => {
            setTimeout(() => {
                document.querySelector('#loading').style.cssText=`
                    transition: opacity 1s linear;
                    opacity : 0;
                    display : none;
                `;
            }, 2000);  
        }
    }
    
    // cursorCustom
    const cursorCustom = (e) => { 
    let aLink = document.querySelectorAll('a');  
 
        // 마우스 좌표
        let mouseX = 0;
        let mouseY = 0;

        // el좌표
        let currentX = 0;
        let currentY = 0;

        document.addEventListener('mousemove', (e) => {
            mouseX = e.clientX;
            mouseY = e.clientY; 
            tick();  
        })  
        aLink.forEach((v,i) => {    
            aLink[i].addEventListener('mouseover', () => { 
                cursor.style.cssText=`
                transition: all 0.3 linear;
                width:50px;
                height:50px;
                `;   
            }) 
            aLink[i].addEventListener('mouseleave', () => { 
                cursor.style.cssText=`
                transition: all 0.3 linear;
                width:30px;
                height:30px;
                `;
            }) 
        })  
        
        function tick(){
            requestAnimationFrame(tick);
            
            currentX += (mouseX - currentX - 5) * 0.5;
            currentY += (mouseY - currentY - 80) * 0.5; 
            cursor.style.transform = `translate(${currentX}px, ${currentY}px)`;
            closeCursor.style.transform = `translate(${currentX}px, ${currentY}px)`;
        } 
    } 
    
    // nav
    const navBtn = () => {
        let nav = document.querySelectorAll('#nav > ul > li'); 
        nav.forEach((v,i) => {
            nav[i].addEventListener('click', () => {
                nav.forEach((v,j) => {
                    nav[j].classList.remove('active');
                })
                nav[i].classList.add('active');
           }) 
        })
    }
   
    // scrollTop
    const scrollTop = () => {
        let top = document.querySelector('#top');
        let section = document.querySelector('#section');
        top.addEventListener('click', () => {
            section.scrollTo(0,0);
        })
        pcLayoutTop.addEventListener('click', () => {
            pcLayoutWindow.scrollTo(0,0);
        })
        mobileLayoutTop.addEventListener('click', () => {
            mobileLayoutWindow.scrollTo(0,0);
        })
    }

    // white & black Mode Change
    const whiteDark = () => {
        let index = 1;
        let changeBg = document.querySelector('#changeBg img');
        changeBg.addEventListener('click', () => {
            if( index == 1 ){
                changeBg.src = "./img/littlesun.webp";
                document.querySelector('body').classList.add('white');
                document.querySelector('body').classList.remove('black');
                index = 0;
            }else{
                changeBg.src = "./img/littledeep.webp";
                document.querySelector('body').classList.remove('white');
                document.querySelector('body').classList.add('black');
                index = 1;
            }
            
        })
    }

    // preview scrolling mousevoer & mouseleave
    const previewImg = () => {
        let preview = document.querySelectorAll('#previewImg');   
        let y = 1;
        let mOver, mleave;  
        preview.forEach((v,i) => {  
            preview[i].addEventListener('mouseover', () => {    
                let previewHeight = preview[i].height;
                clearInterval(mleave); 
                    mOver = setInterval(() => {   

                    if( previewHeight - 245 < y ){
                        clearInterval(mOver); 
                    }else{
                        preview[i].style.top = - y+"px";
                        y+=10;
                        
                    } 
                }, 100);
            })   
 
        preview[i].addEventListener('mouseleave', (e) => {   
            clearInterval(mOver);  
                mleave = setInterval(() => {   
                    if( 0 > y ){
                        clearInterval(mleave); 
                    }else{ 
                        preview[i].style.top = - y+"px";
                        y-=10;   
                    }   
                }, 100);
            })  
        })   
    }

    // pcLayout
    const pc = () => {
        let pcBtn = document.querySelectorAll('#pcBtn');
        let pcImg = document.querySelector('#pcImg img');

        pcBtn.forEach((v,i) => {
            pcBtn[i].addEventListener('click', () => {
                pcLayoutWindow.classList.add('show');
                pcLayoutTop.classList.add('show');
                cursor.style.display = "none";
                closeCursor.style.display = "block"; 
                 
                // pc 버전 상세이미지
                switch(i) {
                    case 0:
                        pcImg.src = "./img/works/seoulmilk.png";
                        break;
                    case 1:
                        pcImg.src = "./img/works/peripera.png";
                        break;
                    case 2:
                        pcImg.src = "./img/works/momoran.png";
                        break;
                }

            });
            pcLayoutWindow.addEventListener('click', () => {
                pcLayoutWindow.classList.remove('show');
                pcLayoutTop.classList.remove('show');
                cursor.style.display = "block";
                closeCursor.style.display = "none";
            });
        })
        
        pcLayoutTop.addEventListener('mouseover', () => {
            cursor.style.display = "block";
            closeCursor.style.display = "none";
        })
        pcLayoutTop.addEventListener('mouseleave', () => {
            cursor.style.display = "none";
            closeCursor.style.display = "block";
        })
        
    }
    
    // mobileLayout
    const mobile = () => {
        let mobileBtn = document.querySelectorAll('#mobileBtn'); 
        let mobileImg = document.querySelector('#mobileImg img');

        mobileBtn.forEach((v,i) => {
            mobileBtn[i].addEventListener('click', () => {
                mobileLayout.classList.add('show');
                mobileLayoutTop.classList.add('show');
                cursor.style.display = "none";
                closeCursor.style.display = "block"; 

                // mobile 버전 상세이미지
                switch(i) {
                case 0:
                    mobileImg.src = "./img/works/seoulmilk_mobile.png"; 
                    break;
                case 1:
                    mobileImg.src = "./img/works/peripera_mobile.png";    
                }

            })
            mobileLayout.addEventListener('click', () => { 
                mobileLayout.classList.remove('show');
                mobileLayoutTop.classList.remove('show');
                cursor.style.display = "block";
                closeCursor.style.display = "none";
            });
        })

        mobileLayoutTop.addEventListener('mouseover', () => {
            cursor.style.display = "block";
            closeCursor.style.display = "none";
        })
        mobileLayoutTop.addEventListener('mouseleave', () => {
            cursor.style.display = "none";
            closeCursor.style.display = "block";
        })
    }

    init();
</script>